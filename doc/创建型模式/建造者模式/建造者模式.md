# 建造者模式
## 介绍
建造者模式是5种创建型模式种的一种。<BR>它允许客户在不知道目标对象内部构建细节的情形下，通过Builder类精确控制对象的构建流程。
该模式可以将创建对象的过程和它的部件解耦。
## 定义
    将一个复杂对象的构建和它的表示分离，可以控制对象的构建流程，对调用者隐藏具体的构建细节。
## 使用场景
1. 对象特别复杂，参数很多时。（这种情况是最常见的）
2. 多个部件或者零件都可以装配到一个类中，但是产生的结果不相同时
3. 相同的方法，不同的执行顺序产生不同的事件结果。
## 建造者模式的具体用法
对比下传统创建对象和建造者模式的区别
### 传统创建对象
当参数过多时，构造函数所需的参数过长。不容易看的同时，也容易出现传错参数的情形。具体代码如下
```java
/**
 * @author：TianLong
 * @date：2022/10/17 20:15
 * @detail：传统创建对象方法
 */
class BuilderDemo {
    public static void main(String[] args) {
        Computer computer = new Computer("MAC OS","微星 B550M","IQUNIX F97","罗技 MX MASTER3","INTEL I5","NV 3060TI");
        System.out.println(computer.toString());
    }

    static class Computer {
        private String mOS;
        private String mBroad;
        private String mKeyBoard;
        private String mMouse;
        private String mCPU;
        private String mGPU;

        public Computer(String OS, String broad, String keyBoard, String mouse, String CPU, String GPU) {
            mOS = OS;
            mBroad = broad;
            mKeyBoard = keyBoard;
            mMouse = mouse;
            mCPU = CPU;
            mGPU = GPU;
        }

        @Override
        public String toString() {
            return "Computer{" +
                    "mOS='" + mOS + '\'' +
                    ", mBroad='" + mBroad + '\'' +
                    ", mKeyBoard='" + mKeyBoard + '\'' +
                    ", mMouse='" + mMouse + '\'' +
                    ", mCPU='" + mCPU + '\'' +
                    ", mGPU='" + mGPU + '\'' +
                    '}';
        }
    }
}
```
### 建造者模式创建对象
将对象的具体创建细节对外部隐藏。通过Builder类，流式的传递参数，方便代码的审查不容易出错，最后构建目标对象。<BR>
不容易出错的同时，还将对象和客户端进行解耦。通常情况下，目标对象不会有set方法，防止客户端直接修改对象属性。<br>
下列代码为常见的**建造者模式**的写法。

#### 产品类和产品的Builder类
```java
/**
 * @author：TianLong
 * @date：2022/10/17 19:58
 * @detail：产品类
 */
class Computer{
    private String mOS;
    private String mBroad;
    private String mKeyBoard;
    private String mMouse;
    private String mCPU;
    private String mGPU;
    private Computer(String OS, String broad, String keyBoard, String mouse, String CPU, String GPU) {
        mOS = OS;
        mBroad = broad;
        mKeyBoard = keyBoard;
        mMouse = mouse;
        mCPU = CPU;
        mGPU = GPU;
    }

    public static ComputerBuilder createBuilder(){
        return new ComputerBuilder();
    }

    @Override
    public String toString() {
        return "Computer{" +
                "mOS='" + mOS + '\'' +
                ", mBroad='" + mBroad + '\'' +
                ", mKeyBoard='" + mKeyBoard + '\'' +
                ", mMouse='" + mMouse + '\'' +
                ", mCPU='" + mCPU + '\'' +
                ", mGPU='" + mGPU + '\'' +
                '}';
    }

    /**
     * @author：TianLong
     * @date：2022/10/17 19:58
     * @detail：产品建造者类
     */
    public static class ComputerBuilder{
        private String mOS = "Windows";
        private String mBroad= "微星 B550M";
        private String mKeyBoard= "无";
        private String mMouse= "无";
        private String mCPU= "Intel I5";
        private String mGPU= "AMD 6600XT";

        public ComputerBuilder setOS(String OS) {
            mOS = OS;
            return this;
        }

        public ComputerBuilder setBroad(String broad) {
            mBroad = broad;
            return this;
        }

        public ComputerBuilder setKeyBoard(String keyBoard) {
            mKeyBoard = keyBoard;
            return this;
        }

        public ComputerBuilder setMouse(String mouse) {
            mMouse = mouse;
            return this;
        }

        public ComputerBuilder setCPU(String CPU) {
            mCPU = CPU;
            return this;
        }

        public ComputerBuilder setGPU(String GPU) {
            mGPU = GPU;
            return this;
        }

        public Computer build(){
            Computer computer = new Computer(mOS,mBroad,mKeyBoard,mMouse,mCPU,mGPU);
            return computer;
        }
    }
}

```
#### 客户端
```java
/**
 * @author：TianLong
 * @date：2022/10/17 20:07
 * @detail：客户端类
 */
class Client {
    public static void main(String[] args) {
        Computer computer =Computer.createBuilder()
                .setCPU("AMD 5600X")
                .setGPU("NV 3060TI")
                .setMouse("罗技 MX MASTER3")
                .setKeyBoard("IQUNIX F97")
                .build();

        System.out.println(computer.toString());
    }
}
```

### 注意事项
1. 上述代码为常见写法，并非固定模板。只要能通过**Builder类**创建目标对象，都可以算是**建造者模式**。
2. 建造者模式中的目标对象的构造函数必须是**private修饰**。否则可以直接创建对象。Builder类就没有意义了